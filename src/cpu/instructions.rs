macro_rules! instruction {
    ($mnemonic:expr,$op_code:expr,$bytes:expr,$cycle:expr) => {
        Instruction {
            #[cfg(debug_assertions)]
            mnemonic: $mnemonic,

            op_code: $op_code,
            bytes: $bytes,
            cycle: $cycle,
            instruction_type: InstructionType::TODO,
        }
    };
    ($mnemonic:expr,$op_code:expr,$bytes:expr,$cycle:expr,$instruction_type:expr) => {
        Instruction {
            #[cfg(debug_assertions)]
            mnemonic: $mnemonic,

            op_code: $op_code,
            bytes: $bytes,
            cycle: $cycle,
            instruction_type: $instruction_type,
        }
    };
}

pub enum InstructionType {
    TODO,
    LD,
    BRK,
    TAX,
    INC,
}

pub struct Instruction {
    #[cfg(debug_assertions)]
    pub mnemonic: &'static str,

    pub op_code: u8,
    pub bytes: u8,
    pub cycle: u8,
    pub instruction_type: InstructionType,
}

impl std::fmt::Display for Instruction {
    #[cfg(debug_assertions)]
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        write!(f, "Instruction {:#04X?}: {}", self.op_code, self.mnemonic)
    }

    #[cfg(not(debug_assertions))]
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        write!(f, "Instruction {:#04X?}", self.op_code)
    }
}

pub fn get_instruction_from_opcode(op_code: u8) -> &'static Instruction {
    &INSTRUCTION_SET[op_code as usize]
}

const INSTRUCTION_SET: [Instruction; 256] = [
    instruction!("BRK", 0, 1, 7, InstructionType::BRK),
    instruction!("FAKE LD", 1, 0, 0),
    instruction!("FAKE LD", 2, 0, 0),
    instruction!("FAKE LD", 3, 0, 0),
    instruction!("FAKE LD", 4, 0, 0),
    instruction!("FAKE LD", 5, 0, 0),
    instruction!("FAKE LD", 6, 0, 0),
    instruction!("FAKE LD", 7, 0, 0),
    instruction!("FAKE LD", 8, 0, 0),
    instruction!("FAKE LD", 9, 0, 0),
    instruction!("FAKE LD", 10, 0, 0),
    instruction!("FAKE LD", 11, 0, 0),
    instruction!("FAKE LD", 12, 0, 0),
    instruction!("FAKE LD", 13, 0, 0),
    instruction!("FAKE LD", 14, 0, 0),
    instruction!("FAKE LD", 15, 0, 0),
    instruction!("FAKE LD", 16, 0, 0),
    instruction!("FAKE LD", 17, 0, 0),
    instruction!("FAKE LD", 18, 0, 0),
    instruction!("FAKE LD", 19, 0, 0),
    instruction!("FAKE LD", 20, 0, 0),
    instruction!("FAKE LD", 21, 0, 0),
    instruction!("FAKE LD", 22, 0, 0),
    instruction!("FAKE LD", 23, 0, 0),
    instruction!("FAKE LD", 24, 0, 0),
    instruction!("FAKE LD", 25, 0, 0),
    instruction!("FAKE LD", 26, 0, 0),
    instruction!("FAKE LD", 27, 0, 0),
    instruction!("FAKE LD", 28, 0, 0),
    instruction!("FAKE LD", 29, 0, 0),
    instruction!("FAKE LD", 30, 0, 0),
    instruction!("FAKE LD", 31, 0, 0),
    instruction!("FAKE LD", 32, 0, 0),
    instruction!("FAKE LD", 33, 0, 0),
    instruction!("FAKE LD", 34, 0, 0),
    instruction!("FAKE LD", 35, 0, 0),
    instruction!("FAKE LD", 36, 0, 0),
    instruction!("FAKE LD", 37, 0, 0),
    instruction!("FAKE LD", 38, 0, 0),
    instruction!("FAKE LD", 39, 0, 0),
    instruction!("FAKE LD", 40, 0, 0),
    instruction!("FAKE LD", 41, 0, 0),
    instruction!("FAKE LD", 42, 0, 0),
    instruction!("FAKE LD", 43, 0, 0),
    instruction!("FAKE LD", 44, 0, 0),
    instruction!("FAKE LD", 45, 0, 0),
    instruction!("FAKE LD", 46, 0, 0),
    instruction!("FAKE LD", 47, 0, 0),
    instruction!("FAKE LD", 48, 0, 0),
    instruction!("FAKE LD", 49, 0, 0),
    instruction!("FAKE LD", 50, 0, 0),
    instruction!("FAKE LD", 51, 0, 0),
    instruction!("FAKE LD", 52, 0, 0),
    instruction!("FAKE LD", 53, 0, 0),
    instruction!("FAKE LD", 54, 0, 0),
    instruction!("FAKE LD", 55, 0, 0),
    instruction!("FAKE LD", 56, 0, 0),
    instruction!("FAKE LD", 57, 0, 0),
    instruction!("FAKE LD", 58, 0, 0),
    instruction!("FAKE LD", 59, 0, 0),
    instruction!("FAKE LD", 60, 0, 0),
    instruction!("FAKE LD", 61, 0, 0),
    instruction!("FAKE LD", 62, 0, 0),
    instruction!("FAKE LD", 63, 0, 0),
    instruction!("FAKE LD", 64, 0, 0),
    instruction!("FAKE LD", 65, 0, 0),
    instruction!("FAKE LD", 66, 0, 0),
    instruction!("FAKE LD", 67, 0, 0),
    instruction!("FAKE LD", 68, 0, 0),
    instruction!("FAKE LD", 69, 0, 0),
    instruction!("FAKE LD", 70, 0, 0),
    instruction!("FAKE LD", 71, 0, 0),
    instruction!("FAKE LD", 72, 0, 0),
    instruction!("FAKE LD", 73, 0, 0),
    instruction!("FAKE LD", 74, 0, 0),
    instruction!("FAKE LD", 75, 0, 0),
    instruction!("FAKE LD", 76, 0, 0),
    instruction!("FAKE LD", 77, 0, 0),
    instruction!("FAKE LD", 78, 0, 0),
    instruction!("FAKE LD", 79, 0, 0),
    instruction!("FAKE LD", 80, 0, 0),
    instruction!("FAKE LD", 81, 0, 0),
    instruction!("FAKE LD", 82, 0, 0),
    instruction!("FAKE LD", 83, 0, 0),
    instruction!("FAKE LD", 84, 0, 0),
    instruction!("FAKE LD", 85, 0, 0),
    instruction!("FAKE LD", 86, 0, 0),
    instruction!("FAKE LD", 87, 0, 0),
    instruction!("FAKE LD", 88, 0, 0),
    instruction!("FAKE LD", 89, 0, 0),
    instruction!("FAKE LD", 90, 0, 0),
    instruction!("FAKE LD", 91, 0, 0),
    instruction!("FAKE LD", 92, 0, 0),
    instruction!("FAKE LD", 93, 0, 0),
    instruction!("FAKE LD", 94, 0, 0),
    instruction!("FAKE LD", 95, 0, 0),
    instruction!("FAKE LD", 96, 0, 0),
    instruction!("FAKE LD", 97, 0, 0),
    instruction!("FAKE LD", 98, 0, 0),
    instruction!("FAKE LD", 99, 0, 0),
    instruction!("FAKE LD", 100, 0, 0),
    instruction!("FAKE LD", 101, 0, 0),
    instruction!("FAKE LD", 102, 0, 0),
    instruction!("FAKE LD", 103, 0, 0),
    instruction!("FAKE LD", 104, 0, 0),
    instruction!("FAKE LD", 105, 0, 0),
    instruction!("FAKE LD", 106, 0, 0),
    instruction!("FAKE LD", 107, 0, 0),
    instruction!("FAKE LD", 108, 0, 0),
    instruction!("FAKE LD", 109, 0, 0),
    instruction!("FAKE LD", 110, 0, 0),
    instruction!("FAKE LD", 111, 0, 0),
    instruction!("FAKE LD", 112, 0, 0),
    instruction!("FAKE LD", 113, 0, 0),
    instruction!("FAKE LD", 114, 0, 0),
    instruction!("FAKE LD", 115, 0, 0),
    instruction!("FAKE LD", 116, 0, 0),
    instruction!("FAKE LD", 117, 0, 0),
    instruction!("FAKE LD", 118, 0, 0),
    instruction!("FAKE LD", 119, 0, 0),
    instruction!("FAKE LD", 120, 0, 0),
    instruction!("FAKE LD", 121, 0, 0),
    instruction!("FAKE LD", 122, 0, 0),
    instruction!("FAKE LD", 123, 0, 0),
    instruction!("FAKE LD", 124, 0, 0),
    instruction!("FAKE LD", 125, 0, 0),
    instruction!("FAKE LD", 126, 0, 0),
    instruction!("FAKE LD", 127, 0, 0),
    instruction!("FAKE LD", 128, 0, 0),
    instruction!("FAKE LD", 129, 0, 0),
    instruction!("FAKE LD", 130, 0, 0),
    instruction!("FAKE LD", 131, 0, 0),
    instruction!("FAKE LD", 132, 0, 0),
    instruction!("FAKE LD", 133, 0, 0),
    instruction!("FAKE LD", 134, 0, 0),
    instruction!("FAKE LD", 135, 0, 0),
    instruction!("FAKE LD", 136, 0, 0),
    instruction!("FAKE LD", 137, 0, 0),
    instruction!("FAKE LD", 138, 0, 0),
    instruction!("FAKE LD", 139, 0, 0),
    instruction!("FAKE LD", 140, 0, 0),
    instruction!("FAKE LD", 141, 0, 0),
    instruction!("FAKE LD", 142, 0, 0),
    instruction!("FAKE LD", 143, 0, 0),
    instruction!("FAKE LD", 144, 0, 0),
    instruction!("FAKE LD", 145, 0, 0),
    instruction!("FAKE LD", 146, 0, 0),
    instruction!("FAKE LD", 147, 0, 0),
    instruction!("FAKE LD", 148, 0, 0),
    instruction!("FAKE LD", 149, 0, 0),
    instruction!("FAKE LD", 150, 0, 0),
    instruction!("FAKE LD", 151, 0, 0),
    instruction!("FAKE LD", 152, 0, 0),
    instruction!("FAKE LD", 153, 0, 0),
    instruction!("FAKE LD", 154, 0, 0),
    instruction!("FAKE LD", 155, 0, 0),
    instruction!("FAKE LD", 156, 0, 0),
    instruction!("FAKE LD", 157, 0, 0),
    instruction!("FAKE LD", 158, 0, 0),
    instruction!("FAKE LD", 159, 0, 0),
    instruction!("FAKE LD", 160, 0, 0),
    instruction!("FAKE LD", 161, 0, 0),
    instruction!("FAKE LD", 162, 0, 0),
    instruction!("FAKE LD", 163, 0, 0),
    instruction!("FAKE LD", 164, 0, 0),
    instruction!("FAKE LD", 165, 0, 0),
    instruction!("FAKE LD", 166, 0, 0),
    instruction!("FAKE LD", 167, 0, 0),
    instruction!("FAKE LD", 168, 0, 0),
    instruction!("LDA #$44", 0xa9, 2, 2, InstructionType::LD),
    instruction!("TAX", 170, 1, 2, InstructionType::TAX),
    instruction!("FAKE LD", 171, 0, 0),
    instruction!("FAKE LD", 172, 0, 0),
    instruction!("FAKE LD", 173, 0, 0),
    instruction!("FAKE LD", 174, 0, 0),
    instruction!("FAKE LD", 175, 0, 0),
    instruction!("FAKE LD", 176, 0, 0),
    instruction!("FAKE LD", 177, 0, 0),
    instruction!("FAKE LD", 178, 0, 0),
    instruction!("FAKE LD", 179, 0, 0),
    instruction!("FAKE LD", 180, 0, 0),
    instruction!("FAKE LD", 181, 0, 0),
    instruction!("FAKE LD", 182, 0, 0),
    instruction!("FAKE LD", 183, 0, 0),
    instruction!("FAKE LD", 184, 0, 0),
    instruction!("FAKE LD", 185, 0, 0),
    instruction!("FAKE LD", 186, 0, 0),
    instruction!("FAKE LD", 187, 0, 0),
    instruction!("FAKE LD", 188, 0, 0),
    instruction!("FAKE LD", 189, 0, 0),
    instruction!("FAKE LD", 190, 0, 0),
    instruction!("FAKE LD", 191, 0, 0),
    instruction!("FAKE LD", 192, 0, 0),
    instruction!("FAKE LD", 193, 0, 0),
    instruction!("FAKE LD", 194, 0, 0),
    instruction!("FAKE LD", 195, 0, 0),
    instruction!("FAKE LD", 196, 0, 0),
    instruction!("FAKE LD", 197, 0, 0),
    instruction!("FAKE LD", 198, 0, 0),
    instruction!("FAKE LD", 199, 0, 0),
    instruction!("FAKE LD", 200, 0, 0),
    instruction!("FAKE LD", 201, 0, 0),
    instruction!("FAKE LD", 202, 0, 0),
    instruction!("FAKE LD", 203, 0, 0),
    instruction!("FAKE LD", 204, 0, 0),
    instruction!("FAKE LD", 205, 0, 0),
    instruction!("FAKE LD", 206, 0, 0),
    instruction!("FAKE LD", 207, 0, 0),
    instruction!("FAKE LD", 208, 0, 0),
    instruction!("FAKE LD", 209, 0, 0),
    instruction!("FAKE LD", 210, 0, 0),
    instruction!("FAKE LD", 211, 0, 0),
    instruction!("FAKE LD", 212, 0, 0),
    instruction!("FAKE LD", 213, 0, 0),
    instruction!("FAKE LD", 214, 0, 0),
    instruction!("FAKE LD", 215, 0, 0),
    instruction!("FAKE LD", 216, 0, 0),
    instruction!("FAKE LD", 217, 0, 0),
    instruction!("FAKE LD", 218, 0, 0),
    instruction!("FAKE LD", 219, 0, 0),
    instruction!("FAKE LD", 220, 0, 0),
    instruction!("FAKE LD", 221, 0, 0),
    instruction!("FAKE LD", 222, 0, 0),
    instruction!("FAKE LD", 223, 0, 0),
    instruction!("FAKE LD", 224, 0, 0),
    instruction!("FAKE LD", 225, 0, 0),
    instruction!("FAKE LD", 226, 0, 0),
    instruction!("FAKE LD", 227, 0, 0),
    instruction!("FAKE LD", 228, 0, 0),
    instruction!("FAKE LD", 229, 0, 0),
    instruction!("FAKE LD", 230, 0, 0),
    instruction!("FAKE LD", 231, 0, 0),
    instruction!("INC", 232, 1, 2, InstructionType::INC),
    instruction!("FAKE LD", 233, 0, 0),
    instruction!("FAKE LD", 234, 0, 0),
    instruction!("FAKE LD", 235, 0, 0),
    instruction!("FAKE LD", 236, 0, 0),
    instruction!("FAKE LD", 237, 0, 0),
    instruction!("FAKE LD", 238, 0, 0),
    instruction!("FAKE LD", 239, 0, 0),
    instruction!("FAKE LD", 240, 0, 0),
    instruction!("FAKE LD", 241, 0, 0),
    instruction!("FAKE LD", 242, 0, 0),
    instruction!("FAKE LD", 243, 0, 0),
    instruction!("FAKE LD", 244, 0, 0),
    instruction!("FAKE LD", 245, 0, 0),
    instruction!("FAKE LD", 246, 0, 0),
    instruction!("FAKE LD", 247, 0, 0),
    instruction!("FAKE LD", 248, 0, 0),
    instruction!("FAKE LD", 249, 0, 0),
    instruction!("FAKE LD", 250, 0, 0),
    instruction!("FAKE LD", 251, 0, 0),
    instruction!("FAKE LD", 252, 0, 0),
    instruction!("FAKE LD", 253, 0, 0),
    instruction!("FAKE LD", 254, 0, 0),
    instruction!("FAKE LD", 255, 0, 0),
];
