macro_rules! instruction {
    ($mnemonic:expr,$op_code:expr,$bytes:expr,$cycle:expr) => {
        Instruction {
            #[cfg(debug_assertions)]
            mnemonic: $mnemonic,

            op_code: $op_code,
            bytes: $bytes,
            cycle: $cycle,
            instruction_type: InstructionType::TODO,
        }
    };
    ($mnemonic:expr,$op_code:expr,$bytes:expr,$cycle:expr,$instruction_type:expr) => {
        Instruction {
            #[cfg(debug_assertions)]
            mnemonic: $mnemonic,

            op_code: $op_code,
            bytes: $bytes,
            cycle: $cycle,
            instruction_type: $instruction_type,
        }
    };
}

pub enum InstructionType {
    TODO,
    LDA,
    LDY,
    LDX,
    BRK,
    TAX,
    INC,
    STA,
}

pub struct Instruction {
    #[cfg(debug_assertions)]
    pub mnemonic: &'static str,

    pub op_code: u8,
    pub bytes: u8,
    pub cycle: u8,
    pub instruction_type: InstructionType,
}

impl std::fmt::Display for Instruction {
    #[cfg(debug_assertions)]
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        write!(f, "Instruction {:#04X?}: {}", self.op_code, self.mnemonic)
    }

    #[cfg(not(debug_assertions))]
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        write!(f, "Instruction {:#04X?}", self.op_code)
    }
}

pub fn get_instruction_from_opcode(op_code: u8) -> &'static Instruction {
    &INSTRUCTION_SET[op_code as usize]
}

const INSTRUCTION_SET: [Instruction; 256] = [
    instruction!("BRK", 0, 1, 7, InstructionType::BRK),
    instruction!("TODO", 1, 0, 0),
    instruction!("TODO", 2, 0, 0),
    instruction!("TODO", 3, 0, 0),
    instruction!("TODO", 4, 0, 0),
    instruction!("TODO", 5, 0, 0),
    instruction!("TODO", 6, 0, 0),
    instruction!("TODO", 7, 0, 0),
    instruction!("TODO", 8, 0, 0),
    instruction!("TODO", 9, 0, 0),
    instruction!("TODO", 10, 0, 0),
    instruction!("TODO", 11, 0, 0),
    instruction!("TODO", 12, 0, 0),
    instruction!("TODO", 13, 0, 0),
    instruction!("TODO", 14, 0, 0),
    instruction!("TODO", 15, 0, 0),
    instruction!("TODO", 16, 0, 0),
    instruction!("TODO", 17, 0, 0),
    instruction!("TODO", 18, 0, 0),
    instruction!("TODO", 19, 0, 0),
    instruction!("TODO", 20, 0, 0),
    instruction!("TODO", 21, 0, 0),
    instruction!("TODO", 22, 0, 0),
    instruction!("TODO", 23, 0, 0),
    instruction!("TODO", 24, 0, 0),
    instruction!("TODO", 25, 0, 0),
    instruction!("TODO", 26, 0, 0),
    instruction!("TODO", 27, 0, 0),
    instruction!("TODO", 28, 0, 0),
    instruction!("TODO", 29, 0, 0),
    instruction!("TODO", 30, 0, 0),
    instruction!("TODO", 31, 0, 0),
    instruction!("TODO", 32, 0, 0),
    instruction!("TODO", 33, 0, 0),
    instruction!("TODO", 34, 0, 0),
    instruction!("TODO", 35, 0, 0),
    instruction!("TODO", 36, 0, 0),
    instruction!("TODO", 37, 0, 0),
    instruction!("TODO", 38, 0, 0),
    instruction!("TODO", 39, 0, 0),
    instruction!("TODO", 40, 0, 0),
    instruction!("TODO", 41, 0, 0),
    instruction!("TODO", 42, 0, 0),
    instruction!("TODO", 43, 0, 0),
    instruction!("TODO", 44, 0, 0),
    instruction!("TODO", 45, 0, 0),
    instruction!("TODO", 46, 0, 0),
    instruction!("TODO", 47, 0, 0),
    instruction!("TODO", 48, 0, 0),
    instruction!("TODO", 49, 0, 0),
    instruction!("TODO", 50, 0, 0),
    instruction!("TODO", 51, 0, 0),
    instruction!("TODO", 52, 0, 0),
    instruction!("TODO", 53, 0, 0),
    instruction!("TODO", 54, 0, 0),
    instruction!("TODO", 55, 0, 0),
    instruction!("TODO", 56, 0, 0),
    instruction!("TODO", 57, 0, 0),
    instruction!("TODO", 58, 0, 0),
    instruction!("TODO", 59, 0, 0),
    instruction!("TODO", 60, 0, 0),
    instruction!("TODO", 61, 0, 0),
    instruction!("TODO", 62, 0, 0),
    instruction!("TODO", 63, 0, 0),
    instruction!("TODO", 64, 0, 0),
    instruction!("TODO", 65, 0, 0),
    instruction!("TODO", 66, 0, 0),
    instruction!("TODO", 67, 0, 0),
    instruction!("TODO", 68, 0, 0),
    instruction!("TODO", 69, 0, 0),
    instruction!("TODO", 70, 0, 0),
    instruction!("TODO", 71, 0, 0),
    instruction!("TODO", 72, 0, 0),
    instruction!("TODO", 73, 0, 0),
    instruction!("TODO", 74, 0, 0),
    instruction!("TODO", 75, 0, 0),
    instruction!("TODO", 76, 0, 0),
    instruction!("TODO", 77, 0, 0),
    instruction!("TODO", 78, 0, 0),
    instruction!("TODO", 79, 0, 0),
    instruction!("TODO", 80, 0, 0),
    instruction!("TODO", 81, 0, 0),
    instruction!("TODO", 82, 0, 0),
    instruction!("TODO", 83, 0, 0),
    instruction!("TODO", 84, 0, 0),
    instruction!("TODO", 85, 0, 0),
    instruction!("TODO", 86, 0, 0),
    instruction!("TODO", 87, 0, 0),
    instruction!("TODO", 88, 0, 0),
    instruction!("TODO", 89, 0, 0),
    instruction!("TODO", 90, 0, 0),
    instruction!("TODO", 91, 0, 0),
    instruction!("TODO", 92, 0, 0),
    instruction!("TODO", 93, 0, 0),
    instruction!("TODO", 94, 0, 0),
    instruction!("TODO", 95, 0, 0),
    instruction!("TODO", 96, 0, 0),
    instruction!("TODO", 97, 0, 0),
    instruction!("TODO", 98, 0, 0),
    instruction!("TODO", 99, 0, 0),
    instruction!("TODO", 100, 0, 0),
    instruction!("TODO", 101, 0, 0),
    instruction!("TODO", 102, 0, 0),
    instruction!("TODO", 103, 0, 0),
    instruction!("TODO", 104, 0, 0),
    instruction!("TODO", 105, 0, 0),
    instruction!("TODO", 106, 0, 0),
    instruction!("TODO", 107, 0, 0),
    instruction!("TODO", 108, 0, 0),
    instruction!("TODO", 109, 0, 0),
    instruction!("TODO", 110, 0, 0),
    instruction!("TODO", 111, 0, 0),
    instruction!("TODO", 112, 0, 0),
    instruction!("TODO", 113, 0, 0),
    instruction!("TODO", 114, 0, 0),
    instruction!("TODO", 115, 0, 0),
    instruction!("TODO", 116, 0, 0),
    instruction!("TODO", 117, 0, 0),
    instruction!("TODO", 118, 0, 0),
    instruction!("TODO", 119, 0, 0),
    instruction!("TODO", 120, 0, 0),
    instruction!("TODO", 121, 0, 0),
    instruction!("TODO", 122, 0, 0),
    instruction!("TODO", 123, 0, 0),
    instruction!("TODO", 124, 0, 0),
    instruction!("TODO", 125, 0, 0),
    instruction!("TODO", 126, 0, 0),
    instruction!("TODO", 127, 0, 0),
    instruction!("TODO", 128, 0, 0),
    instruction!("STA ($44,X)", 129, 2, 6, InstructionType::STA),
    instruction!("TODO", 130, 0, 0),
    instruction!("TODO", 131, 0, 0),
    instruction!("TODO", 132, 0, 0),
    instruction!("STA $44", 133, 2, 3, InstructionType::STA),
    instruction!("TODO", 134, 0, 0),
    instruction!("TODO", 135, 0, 0),
    instruction!("TODO", 136, 0, 0),
    instruction!("TODO", 137, 0, 0),
    instruction!("TODO", 138, 0, 0),
    instruction!("TODO", 139, 0, 0),
    instruction!("TODO", 140, 0, 0),
    instruction!("STA $4400", 141, 3, 4, InstructionType::STA),
    instruction!("TODO", 142, 0, 0),
    instruction!("TODO", 143, 0, 0),
    instruction!("TODO", 144, 0, 0),
    instruction!("STA ($44),Y", 145, 2, 6, InstructionType::STA),
    instruction!("TODO", 146, 0, 0),
    instruction!("TODO", 147, 0, 0),
    instruction!("TODO", 148, 0, 0),
    instruction!("STA $44,X", 149, 2, 4, InstructionType::STA),
    instruction!("TODO", 150, 0, 0),
    instruction!("TODO", 151, 0, 0),
    instruction!("TODO", 152, 0, 0),
    instruction!("STA $4400,Y", 153, 3, 5, InstructionType::STA),
    instruction!("TODO", 154, 0, 0),
    instruction!("TODO", 155, 0, 0),
    instruction!("TODO", 156, 0, 0),
    instruction!("STA $4400,X", 157, 3, 5, InstructionType::STA),
    instruction!("TODO", 158, 0, 0),
    instruction!("TODO", 159, 0, 0),
    instruction!("LDY #$44", 160, 2, 2, InstructionType::LDY),
    instruction!("LDA ($44,X)", 161, 2, 6, InstructionType::LDA),
    instruction!("LDX #$44", 162, 2, 2, InstructionType::LDX),
    instruction!("TODO", 163, 0, 0),
    instruction!("LDY $44", 164, 2, 3, InstructionType::LDY),
    instruction!("LDA $44", 165, 2, 3, InstructionType::LDA),
    instruction!("LDX $44", 166, 2, 3, InstructionType::LDX),
    instruction!("TODO", 167, 0, 0),
    instruction!("TODO", 168, 0, 0),
    instruction!("LDA #$44", 169, 2, 2, InstructionType::LDA),
    instruction!("TAX", 170, 1, 2, InstructionType::TAX),
    instruction!("TODO", 171, 0, 0),
    instruction!("TODO", 172, 0, 0),
    instruction!("LDA $4400", 173, 3, 4, InstructionType::LDA),
    instruction!("LDX $4400", 174, 3, 4, InstructionType::LDX),
    instruction!("TODO", 175, 0, 0),
    instruction!("TODO", 176, 0, 0),
    instruction!("LDA ($44),Y", 177, 2, 5 /*+1 if page boundary crossed*/, InstructionType::LDA),
    instruction!("TODO", 178, 0, 0),
    instruction!("TODO", 179, 0, 0),
    instruction!("LDY $44,X", 180, 2, 4, InstructionType::LDY),
    instruction!("LDA $44,X", 181, 2, 4, InstructionType::LDA),
    instruction!("LDX $44,Y", 182, 2, 4, InstructionType::LDX),
    instruction!("TODO", 183, 0, 0),
    instruction!("TODO", 184, 0, 0),
    instruction!("LDA ($4400,X)", 185, 3, 4 /* +1 if page boundary crosses */, InstructionType::LDA),
    instruction!("TODO", 186, 0, 0),
    instruction!("TODO", 187, 0, 0),
    instruction!("LDY $4400,X", 188, 3, 4 /* +1 if page boundary crossed */, InstructionType::LDY),
    instruction!("LDA $4400,X", 189, 3, 4 /* +1 if page boundary crossed */, InstructionType::LDA),
    instruction!("LDX $4400", 190, 3, 4 /* +1 if page boundary crossed */, InstructionType::LDX),
    instruction!("TODO", 191, 0, 0),
    instruction!("TODO", 192, 0, 0),
    instruction!("TODO", 193, 0, 0),
    instruction!("TODO", 194, 0, 0),
    instruction!("TODO", 195, 0, 0),
    instruction!("TODO", 196, 0, 0),
    instruction!("TODO", 197, 0, 0),
    instruction!("TODO", 198, 0, 0),
    instruction!("TODO", 199, 0, 0),
    instruction!("TODO", 200, 0, 0),
    instruction!("TODO", 201, 0, 0),
    instruction!("TODO", 202, 0, 0),
    instruction!("TODO", 203, 0, 0),
    instruction!("TODO", 204, 0, 0),
    instruction!("TODO", 205, 0, 0),
    instruction!("TODO", 206, 0, 0),
    instruction!("TODO", 207, 0, 0),
    instruction!("TODO", 208, 0, 0),
    instruction!("TODO", 209, 0, 0),
    instruction!("TODO", 210, 0, 0),
    instruction!("TODO", 211, 0, 0),
    instruction!("TODO", 212, 0, 0),
    instruction!("TODO", 213, 0, 0),
    instruction!("TODO", 214, 0, 0),
    instruction!("TODO", 215, 0, 0),
    instruction!("TODO", 216, 0, 0),
    instruction!("TODO", 217, 0, 0),
    instruction!("TODO", 218, 0, 0),
    instruction!("TODO", 219, 0, 0),
    instruction!("TODO", 220, 0, 0),
    instruction!("TODO", 221, 0, 0),
    instruction!("TODO", 222, 0, 0),
    instruction!("TODO", 223, 0, 0),
    instruction!("TODO", 224, 0, 0),
    instruction!("TODO", 225, 0, 0),
    instruction!("TODO", 226, 0, 0),
    instruction!("TODO", 227, 0, 0),
    instruction!("TODO", 228, 0, 0),
    instruction!("TODO", 229, 0, 0),
    instruction!("TODO", 230, 0, 0),
    instruction!("TODO", 231, 0, 0),
    instruction!("INC", 232, 1, 2, InstructionType::INC),
    instruction!("TODO", 233, 0, 0),
    instruction!("TODO", 234, 0, 0),
    instruction!("TODO", 235, 0, 0),
    instruction!("TODO", 236, 0, 0),
    instruction!("TODO", 237, 0, 0),
    instruction!("TODO", 238, 0, 0),
    instruction!("TODO", 239, 0, 0),
    instruction!("TODO", 240, 0, 0),
    instruction!("TODO", 241, 0, 0),
    instruction!("TODO", 242, 0, 0),
    instruction!("TODO", 243, 0, 0),
    instruction!("TODO", 244, 0, 0),
    instruction!("TODO", 245, 0, 0),
    instruction!("TODO", 246, 0, 0),
    instruction!("TODO", 247, 0, 0),
    instruction!("TODO", 248, 0, 0),
    instruction!("TODO", 249, 0, 0),
    instruction!("TODO", 250, 0, 0),
    instruction!("TODO", 251, 0, 0),
    instruction!("TODO", 252, 0, 0),
    instruction!("TODO", 253, 0, 0),
    instruction!("TODO", 254, 0, 0),
    instruction!("TODO", 255, 0, 0),
];
